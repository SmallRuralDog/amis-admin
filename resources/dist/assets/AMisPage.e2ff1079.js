var j=Object.defineProperty,O=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var L=(t,e,a)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,f=(t,e)=>{for(var a in e||(e={}))J.call(e,a)&&L(t,a,e[a]);if(h)for(var a of h(e))z.call(e,a)&&L(t,a,e[a]);return t},b=(t,e)=>O(t,R(e));import{r as x,i as G,j as H,g,c as w,p as K,_ as M}from"./AMisRenderer.5d9e55f4.js";import{aa as Y,r as _,H as Z,ab as q,Y as m,x as $,y as T,z as D,E as V,T as E,G as I,a3 as N,i as P,ac as F,d as Q,l as U,a5 as W,w as X,f as ee,m as k,n as te,v as ae,u as le,K as ne}from"./main.0078cfcc.js";function oe(t){let e;const a=_(!1),l=Z(b(f({},t),{originalPosition:"",originalOverflow:"",visible:!1}));function s(o){l.text=o}function n(){const o=l.parent;if(!o.vLoadingAddClassList){let r=o.getAttribute("loading-number");r=Number.parseInt(r)-1,r?o.setAttribute("loading-number",r.toString()):(x(o,"el-loading-parent--relative"),o.removeAttribute("loading-number")),x(o,"el-loading-parent--hidden")}i(),v.unmount()}function i(){var o,r;(r=(o=d.$el)==null?void 0:o.parentNode)==null||r.removeChild(d.$el)}function u(){var o;if(t.beforeClose&&!t.beforeClose())return;const r=l.parent;r.vLoadingAddClassList=void 0,a.value=!0,clearTimeout(e),e=window.setTimeout(()=>{a.value&&(a.value=!1,n())},400),l.visible=!1,(o=t.closed)==null||o.call(t)}function p(){!a.value||(a.value=!1,n())}const v=q({name:"ElLoading",setup(){return()=>{const o=l.spinner||l.svg,r=m("svg",f({class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"25 25 50 50"},o?{innerHTML:o}:{}),[m("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),S=l.text?m("p",{class:"el-loading-text"},[l.text]):void 0;return m(E,{name:"el-loading-fade",onAfterLeave:p},{default:$(()=>[T(V("div",{style:{backgroundColor:l.background||""},class:["el-loading-mask",l.customClass,l.fullscreen?"is-fullscreen":""]},[m("div",{class:"el-loading-spinner"},[r,S])]),[[D,l.visible]])])})}}}),d=v.mount(document.createElement("div"));return b(f({},Y(l)),{setText:s,remvoeElLoadingChild:i,close:u,handleAfterLeave:p,vm:d,get $el(){return d.$el}})}let y;const se=function(t={}){if(!G)return;const e=re(t);if(e.fullscreen&&y)return y;const a=oe(b(f({},e),{closed:()=>{var s;(s=e.closed)==null||s.call(e),e.fullscreen&&(y=void 0)}}));ie(e,e.parent,a),A(e,e.parent,a),e.parent.vLoadingAddClassList=()=>A(e,e.parent,a);let l=e.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",e.parent.setAttribute("loading-number",l),e.parent.appendChild(a.$el),I(()=>a.visible.value=e.visible),e.fullscreen&&(y=a),a},re=t=>{var e,a,l,s;let n;return N(t.target)?n=(e=document.querySelector(t.target))!=null?e:document.body:n=t.target||document.body,{parent:n===document.body||t.body?document.body:n,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:n===document.body&&((a=t.fullscreen)!=null?a:!0),lock:(l=t.lock)!=null?l:!1,customClass:t.customClass||"",visible:(s=t.visible)!=null?s:!0,target:n}},ie=async(t,e,a)=>{const{nextZIndex:l}=H(),s={};if(t.fullscreen)a.originalPosition.value=g(document.body,"position"),a.originalOverflow.value=g(document.body,"overflow"),s.zIndex=l();else if(t.parent===document.body){a.originalPosition.value=g(document.body,"position"),await I();for(const n of["top","left"]){const i=n==="top"?"scrollTop":"scrollLeft";s[n]=`${t.target.getBoundingClientRect()[n]+document.body[i]+document.documentElement[i]-Number.parseInt(g(document.body,`margin-${n}`),10)}px`}for(const n of["height","width"])s[n]=`${t.target.getBoundingClientRect()[n]}px`}else a.originalPosition.value=g(e,"position");for(const[n,i]of Object.entries(s))a.$el.style[n]=i},A=(t,e,a)=>{a.originalPosition.value!=="absolute"&&a.originalPosition.value!=="fixed"?w(e,"el-loading-parent--relative"):x(e,"el-loading-parent--relative"),t.fullscreen&&t.lock?w(e,"el-loading-parent--hidden"):x(e,"el-loading-parent--hidden")},C=Symbol("ElLoading"),B=(t,e)=>{var a,l,s,n;const i=e.instance,u=o=>P(e.value)?e.value[o]:void 0,p=o=>{const r=N(o)&&(i==null?void 0:i[o])||o;return r&&_(r)},c=o=>p(u(o)||t.getAttribute(`element-loading-${F(o)}`)),v=(a=u("fullscreen"))!=null?a:e.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:v,target:(l=u("target"))!=null?l:v?void 0:t,body:(s=u("body"))!=null?s:e.modifiers.body,lock:(n=u("lock"))!=null?n:e.modifiers.lock};t[C]={options:d,instance:se(d)}},ue=(t,e)=>{for(const a of Object.keys(e))Q(e[a])&&(e[a].value=t[a])},ce={mounted(t,e){e.value&&B(t,e)},updated(t,e){const a=t[C];e.oldValue!==e.value&&(e.value&&!e.oldValue?B(t,e):e.value&&e.oldValue?P(e.value)&&ue(e.value,a.options):a==null||a.instance.close())},unmounted(t){var e;(e=t[C])==null||e.instance.close()}};const de={class:"amis-page"},me=U({setup(t){const e=_(),a=W(),l=_(!0);X(()=>a.path,async n=>{await s(n)}),ee(()=>{s(a.path)});const s=async n=>{l.value=!0;const i=await K(n);e.value=i.data,l.value=!1};return(n,i)=>{const u=ce;return T((k(),te("div",de,[V(E,{name:"slide-up",mode:"out-in"},{default:$(()=>[e.value?(k(),ae(M,{key:le(a).path,"amis-json":e.value},null,8,["amis-json"])):ne("",!0)]),_:1})])),[[u,l.value]])}}});export{me as default};
